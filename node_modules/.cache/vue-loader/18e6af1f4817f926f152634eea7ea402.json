{"remainingRequest":"/home/hieule/Desktop/DoAn/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hieule/Desktop/DoAn/src/components/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hieule/Desktop/DoAn/src/components/index.vue","mtime":1646237300843},{"path":"/home/hieule/Desktop/DoAn/node_modules/cache-loader/dist/cjs.js","mtime":1626151276645},{"path":"/home/hieule/Desktop/DoAn/node_modules/babel-loader/lib/index.js","mtime":1626151276101},{"path":"/home/hieule/Desktop/DoAn/node_modules/cache-loader/dist/cjs.js","mtime":1626151276645},{"path":"/home/hieule/Desktop/DoAn/node_modules/vue-loader/lib/index.js","mtime":1626151279033}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEhUVFAgfSBmcm9tICIuLi9BUEkvaHR0cF9jb21tb24iOwpleHBvcnQgZGVmYXVsdCB7CiAgbWV0aG9kczogewogICAgc2hvd0Zvb2QoaWQpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImxpc3RGb29kIiwgaWQpOwogICAgfSwKICAgIGZvcm1hdENhc2godmFsdWUpIHsKICAgICAgbGV0IHZhbCA9ICh2YWx1ZSAvIDEpLnRvRml4ZWQoMCkucmVwbGFjZSgiLiIsICIsIik7CiAgICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS5yZXBsYWNlKC9cQig/PShcZHszfSkrKD8hXGQpKS9nLCAiLCIpOwogICAgfSwKICAgIGFzeW5jIHNob3dDYXJ0KCkgewogICAgICBhd2FpdCBIVFRQLmdldChgL2dpb2hhbmcvJHt0aGlzLiRzdG9yZS5zdGF0ZS51c2Vycy51c2Vycy5tYWtofWApLnRoZW4oCiAgICAgICAgKHJlcykgPT4gewogICAgICAgICAgdGhpcy5pdGVtcyA9IHJlcy5kYXRhOwogICAgICAgICAgaWYgKHRoaXMuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMudG90YWwgPSAwOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgICAgIGlmIChlLnNvbHVvbmcgPT09IDApIHsKICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUZvb2QoZS5pZC5tYXNwKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLm9yZGVyID0gdGhpcy5pdGVtcy5tYXAoKGUpID0+IHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBtYXNwOiBlLmlkLm1hc3AsCiAgICAgICAgICAgICAgc29sdW9uZzogZS5zb2x1b25nLAogICAgICAgICAgICAgIGRvbmdpYTogZS5zYW5waGFtLmRvbmdpYSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgICAgICAgbGV0IHRlbXAgPSB0aGlzLml0ZW1zLm1hcCgoZSkgPT4gewogICAgICAgICAgICByZXR1cm4gZS5zYW5waGFtLmRvbmdpYSAqIGUuc29sdW9uZzsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy50b3RhbCA9IHRlbXAucmVkdWNlKCh0b3RhbCwgY3VycmVudFZhbHVlKSA9PiB7CiAgICAgICAgICAgIHJldHVybiB0b3RhbCArIGN1cnJlbnRWYWx1ZTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgKTsKICAgIH0sCiAgICBlZGl0UXVhbnR5KGl0ZW0pIHsKICAgICAgSFRUUC5wb3N0KAogICAgICAgIGAvZ2lvaGFuZy8ke3RoaXMuJHN0b3JlLnN0YXRlLnVzZXJzLnVzZXJzLm1ha2h9LyR7CiAgICAgICAgICBpdGVtLmlkLm1hc3AKICAgICAgICB9P3NvbHVvbmc9JHtpdGVtLnNvbHVvbmcgLSB0aGlzLiRzdG9yZS5zdGF0ZS5mb29kLm9sZFF1YW59YAogICAgICApLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuc2hvd0NhcnQoKTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0TnVtUXVhbiIsIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJzLnVzZXJzLm1ha2gpOwogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBkZWxldGVGb29kKGZvb2RJZCkgewogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZGVsZXRlQmlsbHMiLCB7CiAgICAgICAgZm9vZElkLAogICAgICAgIG1ha2g6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJzLnVzZXJzLm1ha2gsCiAgICAgIH0pOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLnNob3dDYXJ0KCk7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldE51bVF1YW4iLCB0aGlzLiRzdG9yZS5zdGF0ZS51c2Vycy51c2Vycy5tYWtoKTsKICAgICAgfSwgMTAwKTsKICAgIH0sCiAgICBkZXRhaWwob3JkZXJJZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaChgZGV0YWlsLyR7b3JkZXJJZH1gKTsKICAgIH0sCiAgICBMb2dvdXQoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ0b2tlbiIpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgfSwKICAgIHN1Ym1pdCgpIHsKICAgICAgSFRUUC5wdXQoIi9raGFjaGhhbmciLCB7CiAgICAgICAgaG86IHRoaXMudXNlci5obywKICAgICAgICB0ZW46IHRoaXMudXNlci50ZW4sCiAgICAgICAgZW1haWw6IHRoaXMudXNlci5lbWFpbCwKICAgICAgICBzZHQ6IHRoaXMudXNlci5zZHQsCiAgICAgICAgZGlhY2hpOiB0aGlzLnVzZXIuZGlhY2hpLAogICAgICAgIGdpb2l0aW5oOiB0aGlzLnVzZXIuZ2lvaXRpbmgsCiAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlci50YWlraG9hbi51c2VybmFtZSwKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5lZGl0ID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGhhbmRsZU9rKCkgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuZm9vZC5RdWFudHkgPT09IDApIHsKICAgICAgICByZXR1cm4gYWxlcnQoIlZ1aSBsw7JuZyBjaOG7jW4gw610IG5o4bqldCAxIG3Ds24gxINuIik7CiAgICAgIH0KICAgICAgYXdhaXQgSFRUUC5wb3N0KAogICAgICAgIGAvZG9uaGFuZy8ke3RoaXMuJHN0b3JlLnN0YXRlLnVzZXJzLnVzZXJzLm1ha2h9YCwKICAgICAgICB0aGlzLm9yZGVyCiAgICAgICkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5zaG93Q2FydCgpOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXROdW1RdWFuIiwgdGhpcy4kc3RvcmUuc3RhdGUudXNlcnMudXNlcnMubWFraCk7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGhhbmRsZURlbGV0ZSgpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmZvb2QuUXVhbnR5ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGFsZXJ0KCJHaeG7jyBow6BuZyBraMO0bmcgY8OybiBz4bqjbiBwaOG6qW0iKTsKICAgICAgfQogICAgICBhd2FpdCBIVFRQLmRlbGV0ZShgL2dpb2hhbmcvJHt0aGlzLiRzdG9yZS5zdGF0ZS51c2Vycy51c2Vycy5tYWtofWApLnRoZW4oCiAgICAgICAgKCkgPT4gewogICAgICAgICAgdGhpcy5zaG93Q2FydCgpOwogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goCiAgICAgICAgICAgICJnZXROdW1RdWFuIiwKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudXNlcnMudXNlcnMubWFraAogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogICAgZWRpdEluZm8oKSB7CiAgICAgIHRoaXMuZWRpdCA9IHRydWU7CiAgICB9LAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0OiBbXSwKICAgICAgbnVtUXVhbjogMCwKICAgICAgaXRlbXM6IFtdLAogICAgICB1c2VyOiB7fSwKICAgICAgZWRpdDogZmFsc2UsCiAgICAgIG9yZGVyTGlzdDogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICBvcmRlcjogW10sCiAgICB9OwogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGF3YWl0IEhUVFAuZ2V0KCIvZGFuaG11YyIpLnRoZW4oKHJlcykgPT4gewogICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YTsKICAgIH0pOwogICAgbGV0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIik7CiAgICBhd2FpdCBIVFRQLmdldChgL2toYWNoaGFuZy8ke0pTT04ucGFyc2UodG9rZW4pLnVzZXJuYW1lfWApLnRoZW4oKHJlcykgPT4gewogICAgICB0aGlzLnVzZXIgPSByZXMuZGF0YTsKICAgICAgdGhpcy51c2VyLnRlbnF1eWVuID0gSlNPTi5wYXJzZSh0b2tlbikucXV5ZW4udGVucXV5ZW47CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJsb2FkVXNlcnMiLCByZXMuZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXROdW1RdWFuIiwgdGhpcy4kc3RvcmUuc3RhdGUudXNlcnMudXNlcnMubWFraCk7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgibGlzdEJpbGxzIiwgdGhpcy4kc3RvcmUuc3RhdGUudXNlcnMudXNlcnMubWFraCk7CiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-app>\n    <v-app-bar app dark color=\"rgb(116, 116, 252)\">\n      <v-toolbar-title @click=\"homepage()\" style=\"cursor: pointer\">\n        App Cosmetic</v-toolbar-title\n      >\n      <v-spacer />\n      <v-btn text rounded v-b-toggle.sidebar-right\n        ><img\n          class=\"icon\"\n          src=\"https://cdn.pixabay.com/photo/2015/12/23/01/14/edit-1105049_960_720.png\"\n        />\n        <div class=\"number d-flex justify-content-center align-items-start\">\n          <p class=\"num mt-1\">{{ this.$store.state.food.Quanty }}</p>\n        </div></v-btn\n      >\n      <v-btn text rounded v-b-toggle.sidebar-variant\n        ><img\n          class=\"icon\"\n          src=\"https://freeiconshop.com/wp-content/uploads/edd/clipboard-list-flat.png\"\n        />\n        <div class=\"number d-flex justify-content-center align-items-start\">\n          <p class=\"num mt-1\">{{ this.$store.state.food.bill.length }}</p>\n        </div></v-btn\n      >\n      <v-btn text rounded v-b-toggle.sidebar-1\n        ><img\n          class=\"icon user\"\n          src=\"https://www.ebanhang.vn/app/webroot/img/icon_login.png\"\n      /></v-btn>\n    </v-app-bar>\n    <v-content>\n      <router-view />\n    </v-content>\n    <template>\n      <v-footer dark padless>\n        <div v-for=\"item in list\" :key=\"item\">\n          <v-btn text rounded @click=\"showFood(item.madm)\">{{\n            item.tendm\n          }}</v-btn>\n        </div>\n      </v-footer>\n    </template>\n    <b-sidebar\n      @shown=\"showCart\"\n      id=\"sidebar-right\"\n      title=\"Giỏ Hàng\"\n      bg-variant=\"dark\"\n      text-variant=\"light\"\n      right\n      backdrop\n      width=\"550px\"\n      shadow\n    >\n      <template #footer=\"{}\">\n        <div class=\"d-flex bg-dark text-light align-items-center px-3 py-2\">\n          <strong class=\"mr-auto\">Tổng</strong>\n          <strong class=\"mr-auto\">{{ items ? formatCash(total) : 0 }}</strong>\n          <b-button size=\"sm\" class=\"mr-2\" variant=\"danger\" v-b-modal.modal-2\n            >Xóa giỏ hàng</b-button\n          >\n          <b-button size=\"sm\" variant=\"info\" v-b-modal.modal-1\n            >Thanh Toán</b-button\n          >\n        </div>\n      </template>\n      <div class=\"px-3 py-2\">\n        <b-row>\n          <b-col><b>Tên món</b></b-col>\n          <b-col><b>Hình ảnh</b></b-col>\n          <b-col><b>Số lượng</b></b-col>\n          <b-col><b>Đơn giá</b></b-col>\n          <b-col></b-col>\n        </b-row>\n        <div v-for=\"item in items\" :key=\"item\">\n          <b-row>\n            <b-col>{{ item.sanpham.tensp }}</b-col>\n            <b-col\n              ><img class=\"img_cart\" :src=\"item.sanpham.photo\" alt=\"\"\n            /></b-col>\n            <b-col\n              ><input\n                type=\"number\"\n                min=\"0\"\n                class=\"input\"\n                v-model=\"item.soluong\"\n                @change=\"editQuanty(item)\"\n            /></b-col>\n            <b-col>{{ formatCash(+item.sanpham.dongia) }}</b-col>\n            <b-col\n              ><img\n                @click=\"deleteFood(item.sanpham.masp)\"\n                class=\"icon_delete\"\n                src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNQ8CLeXOGmVx62VfeFd3eH2elD1EUYLJ0WISuby6szkUl3P6PLW6Djxuy1yOlLkcCMNs&usqp=CAU\"\n            /></b-col>\n          </b-row>\n        </div>\n      </div>\n    </b-sidebar>\n    <b-sidebar id=\"sidebar-1\" title=\"Thông tin cá nhân\" shadow backdrop>\n      <template #footer=\"{}\">\n        <div\n          class=\"d-flex justify-content-between align-items-center px-3 py-2\"\n        >\n          <b-button size=\"sm\" variant=\"warning\" @click=\"editInfo\"\n            >Sửa thông tin</b-button\n          >\n          <b-button size=\"sm\" variant=\"danger\" @click=\"Logout\"\n            >Đăng xuất</b-button\n          >\n        </div>\n      </template>\n      <div class=\"px-3 py-2\">\n        <div v-if=\"!edit\">\n          <p>Họ tên : {{ user.ho + \" \" + user.ten }}</p>\n          <p>Email : {{ user.email }}</p>\n          <p>Số điện thoại : {{ user.sdt }}</p>\n          <p>Địa chỉ : {{ user.diachi }}</p>\n          <p>Phân Quyền : {{ user.tenquyen }}</p>\n        </div>\n\n        <div v-if=\"edit\">\n          <div class=\"d-flex justify-content-center\">\n            <p>Họ</p>\n            <b-form-input class=\"input\" v-model=\"user.ho\"></b-form-input>\n            <p>Tên</p>\n            <b-form-input class=\"input\" v-model=\"user.ten\"></b-form-input>\n          </div>\n\n          <div class=\"d-flex justify-content-center\">\n            <p>Địa chỉ</p>\n            <b-form-input class=\"input\" v-model=\"user.diachi\"></b-form-input>\n          </div>\n          <div class=\"d-flex justify-content-center\">\n            <p>Số điện thoại</p>\n            <b-form-input class=\"input\" v-model=\"user.sdt\"></b-form-input>\n          </div>\n          <div class=\"d-flex justify-content-center\">\n            <p>Email</p>\n            <b-form-input class=\"input\" v-model=\"user.email\"></b-form-input>\n          </div>\n          <v-radio-group v-model=\"user.gioitinh\" row>\n            <template v-slot:label>\n              <div>Gender :</div>\n            </template>\n            <v-radio label=\"Male\" :value=\"0\"></v-radio>\n            <v-radio label=\"Female\" :value=\"1\"></v-radio>\n          </v-radio-group>\n          <b-button size=\"sm\" variant=\"success\" @click=\"submit\"\n            >Submit</b-button\n          >\n        </div>\n        <b-img\n          src=\"https://picsum.photos/500/500/?image=54\"\n          fluid\n          thumbnail\n        ></b-img>\n      </div>\n    </b-sidebar>\n    <b-modal id=\"modal-1\" title=\"Xác nhận thanh toán\" @ok=\"handleOk\">\n      <p class=\"my-4\">\n        Bạn sẽ thanh toán hóa đơn với số tiền\n        {{ items ? formatCash(total) : \"\" }} ?\n      </p>\n    </b-modal>\n    <b-modal id=\"modal-2\" title=\"Xác nhận thanh toán\" @ok=\"handleDelete\">\n      <p class=\"my-4\">Bạn có chắc chắn xóa giỏ hàng ?</p>\n    </b-modal>\n    <b-sidebar\n      id=\"sidebar-variant\"\n      title=\"Sidebar\"\n      bg-variant=\"dark\"\n      width=\"450px\"\n      backdrop\n      text-variant=\"light\"\n      shadow\n    >\n      <div class=\"px-3 py-2\">\n        <b-row>\n          <b-col cols=\"3\"><b>ID</b></b-col>\n          <b-col><b>Trạng Thái</b></b-col>\n          <b-col><b>Ngày Đặt</b></b-col>\n        </b-row>\n        <div v-for=\"item in this.$store.state.food.bill\" :key=\"item\">\n          <b-row @click=\"detail(item.madh)\">\n            <b-col cols=\"3\">{{ item.madh }}</b-col>\n            <b-col\n              ><b-button\n                :variant=\"item.trangthai === 'PENDING' ? 'warning' : 'success'\"\n                >{{ item.trangthai }}</b-button\n              ></b-col\n            >\n            <b-col>{{ item.ngaydat | moment(\"dddd, MMMM Do YYYY\") }}</b-col>\n          </b-row>\n        </div>\n      </div>\n      <div class=\"px-3 py-2\">\n        <b-table striped hover :items=\"orderList\"></b-table>\n      </div>\n    </b-sidebar>\n  </v-app>\n</template>\n\n<script>\nimport { HTTP } from \"../API/http_common\";\nexport default {\n  methods: {\n    showFood(id) {\n      this.$store.dispatch(\"listFood\", id);\n    },\n    formatCash(value) {\n      let val = (value / 1).toFixed(0).replace(\".\", \",\");\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    },\n    async showCart() {\n      await HTTP.get(`/giohang/${this.$store.state.users.users.makh}`).then(\n        (res) => {\n          this.items = res.data;\n          if (this.items.length === 0) {\n            this.total = 0;\n          }\n          this.items.forEach((e) => {\n            if (e.soluong === 0) {\n              this.deleteFood(e.id.masp);\n            }\n          });\n          this.order = this.items.map((e) => {\n            return {\n              masp: e.id.masp,\n              soluong: e.soluong,\n              dongia: e.sanpham.dongia,\n            };\n          });\n          let temp = this.items.map((e) => {\n            return e.sanpham.dongia * e.soluong;\n          });\n          this.total = temp.reduce((total, currentValue) => {\n            return total + currentValue;\n          });\n        }\n      );\n    },\n    editQuanty(item) {\n      HTTP.post(\n        `/giohang/${this.$store.state.users.users.makh}/${\n          item.id.masp\n        }?soluong=${item.soluong - this.$store.state.food.oldQuan}`\n      ).then(() => {\n        this.showCart();\n        this.$store.dispatch(\"getNumQuan\", this.$store.state.users.users.makh);\n      });\n    },\n    async deleteFood(foodId) {\n      await this.$store.dispatch(\"deleteBills\", {\n        foodId,\n        makh: this.$store.state.users.users.makh,\n      });\n      setTimeout(() => {\n        this.showCart();\n        this.$store.dispatch(\"getNumQuan\", this.$store.state.users.users.makh);\n      }, 100);\n    },\n    detail(orderId) {\n      this.$router.push(`detail/${orderId}`);\n    },\n    Logout() {\n      localStorage.removeItem(\"token\");\n      this.$router.push(\"/\");\n    },\n    submit() {\n      HTTP.put(\"/khachhang\", {\n        ho: this.user.ho,\n        ten: this.user.ten,\n        email: this.user.email,\n        sdt: this.user.sdt,\n        diachi: this.user.diachi,\n        gioitinh: this.user.gioitinh,\n        username: this.user.taikhoan.username,\n      }).then(() => {\n        this.edit = false;\n      });\n    },\n    async handleOk() {\n      if (this.$store.state.food.Quanty === 0) {\n        return alert(\"Vui lòng chọn ít nhất 1 món ăn\");\n      }\n      await HTTP.post(\n        `/donhang/${this.$store.state.users.users.makh}`,\n        this.order\n      ).then(() => {\n        this.showCart();\n        this.$store.dispatch(\"getNumQuan\", this.$store.state.users.users.makh);\n      });\n    },\n    async handleDelete() {\n      if (this.$store.state.food.Quanty === 0) {\n        return alert(\"Giỏ hàng không còn sản phẩm\");\n      }\n      await HTTP.delete(`/giohang/${this.$store.state.users.users.makh}`).then(\n        () => {\n          this.showCart();\n          this.$store.dispatch(\n            \"getNumQuan\",\n            this.$store.state.users.users.makh\n          );\n        }\n      );\n    },\n    editInfo() {\n      this.edit = true;\n    },\n  },\n\n  data() {\n    return {\n      list: [],\n      numQuan: 0,\n      items: [],\n      user: {},\n      edit: false,\n      orderList: [],\n      total: 0,\n      order: [],\n    };\n  },\n  async created() {\n    await HTTP.get(\"/danhmuc\").then((res) => {\n      this.list = res.data;\n    });\n    let token = localStorage.getItem(\"token\");\n    await HTTP.get(`/khachhang/${JSON.parse(token).username}`).then((res) => {\n      this.user = res.data;\n      this.user.tenquyen = JSON.parse(token).quyen.tenquyen;\n      this.$store.dispatch(\"loadUsers\", res.data);\n    });\n    this.$store.dispatch(\"getNumQuan\", this.$store.state.users.users.makh);\n    this.$store.dispatch(\"listBills\", this.$store.state.users.users.makh);\n  },\n};\n</script>\n<style lang='scss' src='../style.scss' >\n</style> \n"]}]}