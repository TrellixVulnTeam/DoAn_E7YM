{"remainingRequest":"/home/hieule/Desktop/DoAn/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hieule/Desktop/DoAn/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hieule/Desktop/DoAn/src/components/Login.vue","mtime":1647073297551},{"path":"/home/hieule/Desktop/DoAn/node_modules/cache-loader/dist/cjs.js","mtime":1626151276645},{"path":"/home/hieule/Desktop/DoAn/node_modules/babel-loader/lib/index.js","mtime":1626151276101},{"path":"/home/hieule/Desktop/DoAn/node_modules/cache-loader/dist/cjs.js","mtime":1626151276645},{"path":"/home/hieule/Desktop/DoAn/node_modules/vue-loader/lib/index.js","mtime":1626151279033}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzcGlubmVyIGZyb20gIi4vc3Bpbm5lciI7CmltcG9ydCB7IHZhbGlkYXRpb25NaXhpbiB9IGZyb20gInZ1ZWxpZGF0ZSI7CmNvbnN0IHRvdWNoTWFwID0gbmV3IFdlYWtNYXAoKTsKaW1wb3J0IHsgcmVxdWlyZWQsIG1pbkxlbmd0aCB9IGZyb20gInZ1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyI7CmltcG9ydCB7IEhUVFAgfSBmcm9tICIuLi9BUEkvaHR0cF9jb21tb24iOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBzcGlubmVyIH0sCiAgbWl4aW5zOiBbdmFsaWRhdGlvbk1peGluXSwKICB2YWxpZGF0aW9uczogewogICAgbmFtZTogeyByZXF1aXJlZCB9LAogICAgcGFzczogeyByZXF1aXJlZCwgbWluTGVuZ3RoOiBtaW5MZW5ndGgoMykgfSwKICB9LAoKICBtZXRob2RzOiB7CiAgICBkZWxheVRvdWNoKCR2KSB7CiAgICAgICR2LiRyZXNldCgpOwogICAgICBpZiAodG91Y2hNYXAuaGFzKCR2KSkgewogICAgICAgIGNsZWFyVGltZW91dCh0b3VjaE1hcC5nZXQoJHYpKTsKICAgICAgfQogICAgICB0b3VjaE1hcC5zZXQoJHYsIHNldFRpbWVvdXQoJHYuJHRvdWNoLCAxMDAwKSk7CiAgICB9LAogICAgc3VibWl0KCkgewogICAgICBIVFRQLnBvc3QoIi9sb2dpbiIsIHsKICAgICAgICB1c2VybmFtZTogdGhpcy5uYW1lLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3MsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YSkpOwogICAgICAgICAgICBpZiAocmVzLmRhdGEucXV5ZW4ubWFxdXllbiA9PT0gMikgewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvdXNlciIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYWRtaW4iKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIGFsZXJ0KCLEkMSDbmcgbmjhuq1wIHRo4bqldCBi4bqhaSIpOwogICAgICAgIH0pOwogICAgfSwKICAgIHJlZ2lzdGVyKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3JlZ2lzdGVyIik7CiAgICB9LAogICAgY29udGludWVzKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3VzZXIiKTsKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1Bhc3N3b3JkOiBmYWxzZSwKICAgICAgbmFtZTogIiIsCiAgICAgIHBhc3M6ICIiLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBwYXNzRXJyb3JzKCkgewogICAgICBjb25zdCBlcnJvcnMgPSBbXTsKICAgICAgaWYgKCF0aGlzLiR2LnBhc3MuJGRpcnR5KSByZXR1cm4gZXJyb3JzOwogICAgICAhdGhpcy4kdi5wYXNzLm1pbkxlbmd0aCAmJgogICAgICAgIGVycm9ycy5wdXNoKCJwYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDMgY2hhcmFjdGVycyBsb25nIik7CiAgICAgICF0aGlzLiR2LnBhc3MucmVxdWlyZWQgJiYgZXJyb3JzLnB1c2goInBhc3N3b3JkIGlzIHJlcXVpcmVkLiIpOwogICAgICByZXR1cm4gZXJyb3JzOwogICAgfSwKICAgIHVzZXJFcnJvcnMoKSB7CiAgICAgIGNvbnN0IGVycm9ycyA9IFtdOwogICAgICBpZiAoIXRoaXMuJHYubmFtZS4kZGlydHkpIHJldHVybiBlcnJvcnM7CiAgICAgICF0aGlzLiR2Lm5hbWUucmVxdWlyZWQgJiYgZXJyb3JzLnB1c2goIlVzZXJuYW1lIGlzIHJlcXVpcmVkIik7CiAgICAgIHJldHVybiBlcnJvcnM7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-app>\n    <v-content>\n      <div class=\"top vuetify\"></div>\n      <div class=\"main\">\n        <v-card width=\"500\" class=\"mx-auto mt-9\">\n          <v-card-title>Đăng nhập</v-card-title>\n          <v-card-text>\n            <form>\n              <v-text-field\n                v-model=\"name\"\n                :error-messages=\"userErrors\"\n                label=\"Username\"\n                required\n                @input=\"delayTouch($v.name)\"\n                @blur=\"$v.name.$touch()\"\n              ></v-text-field>\n              <v-text-field\n                v-model=\"pass\"\n                type=\"password\"\n                :error-messages=\"passErrors\"\n                label=\"Password\"\n                required\n                @input=\"delayTouch($v.pass)\"\n                @blur=\"$v.pass.$touch()\"\n              ></v-text-field>\n            </form>\n          </v-card-text>\n          <v-card-actions>\n            <v-btn color=\"info\" @click=\"submit\">Đăng nhập</v-btn>\n            <v-btn color=\"success\" @click=\"register\">Đăng ký </v-btn>\n            <v-btn color=\"blue-grey\" @click=\"continues\">tiếp tục lướt web </v-btn>\n          </v-card-actions>\n        </v-card>\n        <spinner v-if=\"this.$store.state.users.is_login\" />\n      </div>\n      <div class=\"bot vuetify\"></div>\n    </v-content>\n  </v-app>\n</template>\n\n<script>\nimport spinner from \"./spinner\";\nimport { validationMixin } from \"vuelidate\";\nconst touchMap = new WeakMap();\nimport { required, minLength } from \"vuelidate/lib/validators\";\nimport { HTTP } from \"../API/http_common\";\nexport default {\n  components: { spinner },\n  mixins: [validationMixin],\n  validations: {\n    name: { required },\n    pass: { required, minLength: minLength(3) },\n  },\n\n  methods: {\n    delayTouch($v) {\n      $v.$reset();\n      if (touchMap.has($v)) {\n        clearTimeout(touchMap.get($v));\n      }\n      touchMap.set($v, setTimeout($v.$touch, 1000));\n    },\n    submit() {\n      HTTP.post(\"/login\", {\n        username: this.name,\n        password: this.pass,\n      })\n        .then((res) => {\n          if (res.status === 200) {\n            localStorage.setItem(\"token\", JSON.stringify(res.data));\n            if (res.data.quyen.maquyen === 2) {\n              this.$router.push(\"/user\");\n            } else {\n              this.$router.push(\"/admin\");\n            }\n          }\n        })\n        .catch(() => {\n          alert(\"Đăng nhập thất bại\");\n        });\n    },\n    register() {\n      this.$router.push(\"/register\");\n    },\n    continues() {\n      this.$router.push(\"/user\");\n    },\n  },\n  data() {\n    return {\n      showPassword: false,\n      name: \"\",\n      pass: \"\",\n    };\n  },\n  computed: {\n    passErrors() {\n      const errors = [];\n      if (!this.$v.pass.$dirty) return errors;\n      !this.$v.pass.minLength &&\n        errors.push(\"password must be at least 3 characters long\");\n      !this.$v.pass.required && errors.push(\"password is required.\");\n      return errors;\n    },\n    userErrors() {\n      const errors = [];\n      if (!this.$v.name.$dirty) return errors;\n      !this.$v.name.required && errors.push(\"Username is required\");\n      return errors;\n    },\n  },\n};\n</script>\n\n<style lang='scss' src='../style.scss' scoped/>\n"]}]}