{"remainingRequest":"/home/hieule/Desktop/DoAn/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hieule/Desktop/DoAn/src/components/ProductList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hieule/Desktop/DoAn/src/components/ProductList.vue","mtime":1647174731802},{"path":"/home/hieule/Desktop/DoAn/node_modules/cache-loader/dist/cjs.js","mtime":1626151276645},{"path":"/home/hieule/Desktop/DoAn/node_modules/babel-loader/lib/index.js","mtime":1626151276101},{"path":"/home/hieule/Desktop/DoAn/node_modules/cache-loader/dist/cjs.js","mtime":1626151276645},{"path":"/home/hieule/Desktop/DoAn/node_modules/vue-loader/lib/index.js","mtime":1626151279033}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEhUVFAgfSBmcm9tICIuLi9BUEkvaHR0cF9jb21tb24iOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBlclBhZ2U6IDEyLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgbmFtZUZvb2Q6ICIiLAogICAgICBpbWdhZ2U6ICIiLAogICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgIHByaWNlOiAiIiwKICAgICAgaWRfZm9vZDogIiIsCiAgICAgIHNlYXJjaDogIiIsCiAgICAgIGNhdGU6ICIiLAogICAgICBsaXN0OiBbXSwKICAgIH07CiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgYXdhaXQgSFRUUC5nZXQoIi9kYW5obXVjIikudGhlbigocmVzKSA9PiB7CiAgICAgIHRoaXMubGlzdCA9IHJlcy5kYXRhOwogICAgfSk7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0Zm9vZCIpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHJvd3MoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5mb29kLmZvb2RzLmxlbmd0aDsKICAgIH0sCiAgICBsaXN0cygpIHsKICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5mb29kLmZvb2RzOwogICAgICByZXR1cm4gaXRlbXMuc2xpY2UoCiAgICAgICAgKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGVyUGFnZSwKICAgICAgICB0aGlzLmN1cnJlbnRQYWdlICogdGhpcy5wZXJQYWdlCiAgICAgICk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIGN1cnJlbnRQYWdlOiB7CiAgICAvLyAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgIC8vICAgaGFuZGxlcihkYXRhKSB7CiAgICAvLyAgICAgaWYgKGRhdGEgIT09IDEpIHsKICAgIC8vICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRmb29kIik7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRmb29kIik7CiAgICAvLyAgICAgfQogICAgLy8gICB9LAogICAgLy8gfSwKICAgIHNlYXJjaDogewogICAgICBoYW5kbGVyKGRhdGEpIHsKICAgICAgICBpZiAoZGF0YSAhPT0gIiIpIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzZWFyY2hmb29kIiwgZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRmb29kIik7CiAgICAgICAgfQogICAgICB9LAogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHNob3dNb2RhbChpZF9mb29kKSB7CiAgICAgIGF3YWl0IEhUVFAuZ2V0KGAvc2FucGhhbS8ke2lkX2Zvb2R9YCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5uYW1lRm9vZCA9IHJlcy5kYXRhLnRlbnNwOwogICAgICAgIHRoaXMuaW1hZ2UgPSByZXMuZGF0YS5waG90bzsKICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gcmVzLmRhdGEubW90YV9uZ2FuOwogICAgICAgIHRoaXMucHJpY2UgPSByZXMuZGF0YS5kb25naWE7CiAgICAgICAgdGhpcy5pZF9mb29kID0gaWRfZm9vZDsKICAgICAgICB0aGlzLmNhdGUgPSByZXMuZGF0YS5kYW5obXVjLm1hZG07CiAgICAgIH0pOwogICAgICB0aGlzLiRyZWZzWyJtb2RhbC0xIl0uc2hvdygpOwogICAgfSwKICAgIHNob3dGb29kKGlkKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJsaXN0Rm9vZCIsIGlkKTsKICAgIH0sCiAgICBhc3luYyBhZGRUb0NhcmQoZm9vZCkgewogICAgICBpZighbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikpewogICAgICAgIHJldHVybiBhbGVydCgiVnVpIGzDsm5nIMSRxINuZyBuaOG6rXAgxJHhu4MgbXVhIHPhuqNuIHBo4bqpbSIpCiAgICAgIH0KICAgICAgYXdhaXQgSFRUUC5wb3N0KAogICAgICAgIGAvZ2lvaGFuZy8ke3RoaXMuJHN0b3JlLnN0YXRlLnVzZXJzLnVzZXJzLm1ha2h9LyR7Zm9vZH0/c29sdW9uZz0xYAogICAgICApLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXROdW1RdWFuIiwgdGhpcy4kc3RvcmUuc3RhdGUudXNlcnMudXNlcnMubWFraCk7CiAgICAgIH0pOwogICAgfSwKICAgIGZvcm1hdENhc2godmFsdWUpIHsKICAgICAgbGV0IHZhbCA9ICh2YWx1ZSAvIDEpLnRvRml4ZWQoMCkucmVwbGFjZSgiLiIsICIsIik7CiAgICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS5yZXBsYWNlKC9cQig/PShcZHszfSkrKD8hXGQpKS9nLCAiLCIpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["ProductList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-app>\n    <template>\n      <v-footer dark padless>\n        <div v-for=\"item in list\" :key=\"item\">\n          <v-btn text rounded @click=\"showFood(item.madm)\">{{\n            item.tendm\n          }}</v-btn>\n        </div>\n      </v-footer>\n    </template>\n    <div class=\"d-flex justify-content-center flex-wrap\">\n      <div v-for=\"item in lists\" :key=\"item\" class=\"mt-5 ml-2\">\n        <div class=\"food\" @click=\"showModal(item.masp)\">\n          <div class=\"d-flex justify-content-center\" style=\"height: 40px\">\n            <h6>{{ item.tensp }}</h6>\n          </div>\n          <div class=\"d-flex justify-content-center\">\n            <img class=\"img_list\" :src=\"item.photo\" alt=\"\" />\n          </div>\n\n          <div class=\"d-flex justify-content-center align-items-center mt-2\">\n            <p class=\"mr-2 mt-2\">{{ formatCash(item.dongia.toString()) }}</p>\n            <b-button\n              variant=\"success\"\n              size=\"sm\"\n              class=\"mb-2\"\n              @click.stop=\"addToCard(item.masp)\"\n              >Mua ngay</b-button\n            >\n          </div>\n        </div>\n      </div>\n      <b-modal ref=\"modal-1\" hide-footer hide-header-close hide-header>\n        <div>\n          <h4>{{ nameFood }}</h4>\n          <div class=\"d-flex justify-content-center\">\n            <img :src=\"image\" class=\"img_detail\" />\n          </div>\n          <p>{{ description }}</p>\n          <div class=\"d-flex justify-content-between\">\n            <b-button\n              variant=\"success\"\n              size=\"sm\"\n              class=\"mb-2\"\n              @click=\"addToCard(id_food)\"\n              >Mua ngay</b-button\n            >\n            <h5>{{ formatCash(price.toString()) }}đ</h5>\n          </div>\n        </div>\n      </b-modal>\n    </div>\n    <div class=\"d-flex justify-content-center\">\n      <b-pagination\n        class=\"mt-4\"\n        v-model=\"currentPage\"\n        :total-rows=\"rows\"\n        :per-page=\"perPage\"\n      ></b-pagination>\n    </div>\n  </v-app>\n</template>\n<script>\nimport { HTTP } from \"../API/http_common\";\nexport default {\n  data() {\n    return {\n      perPage: 12,\n      currentPage: 1,\n      nameFood: \"\",\n      imgage: \"\",\n      description: \"\",\n      price: \"\",\n      id_food: \"\",\n      search: \"\",\n      cate: \"\",\n      list: [],\n    };\n  },\n  async created() {\n    await HTTP.get(\"/danhmuc\").then((res) => {\n      this.list = res.data;\n    });\n    this.$store.dispatch(\"getfood\");\n  },\n  computed: {\n    rows() {\n      return this.$store.state.food.foods.length;\n    },\n    lists() {\n      const items = this.$store.state.food.foods;\n      return items.slice(\n        (this.currentPage - 1) * this.perPage,\n        this.currentPage * this.perPage\n      );\n    },\n  },\n  watch: {\n    // currentPage: {\n    //   immediate: true,\n    //   handler(data) {\n    //     if (data !== 1) {\n    //       this.$store.dispatch(\"getfood\");\n    //     } else {\n    //       this.$store.dispatch(\"getfood\");\n    //     }\n    //   },\n    // },\n    search: {\n      handler(data) {\n        if (data !== \"\") {\n          this.$store.dispatch(\"searchfood\", data);\n        } else {\n          this.$store.dispatch(\"getfood\");\n        }\n      },\n    },\n  },\n  methods: {\n    async showModal(id_food) {\n      await HTTP.get(`/sanpham/${id_food}`).then((res) => {\n        this.nameFood = res.data.tensp;\n        this.image = res.data.photo;\n        this.description = res.data.mota_ngan;\n        this.price = res.data.dongia;\n        this.id_food = id_food;\n        this.cate = res.data.danhmuc.madm;\n      });\n      this.$refs[\"modal-1\"].show();\n    },\n    showFood(id) {\n      this.$store.dispatch(\"listFood\", id);\n    },\n    async addToCard(food) {\n      if(!localStorage.getItem(\"token\")){\n        return alert(\"Vui lòng đăng nhập để mua sản phẩm\")\n      }\n      await HTTP.post(\n        `/giohang/${this.$store.state.users.users.makh}/${food}?soluong=1`\n      ).then(() => {\n        this.$store.dispatch(\"getNumQuan\", this.$store.state.users.users.makh);\n      });\n    },\n    formatCash(value) {\n      let val = (value / 1).toFixed(0).replace(\".\", \",\");\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    },\n  },\n};\n</script>\n<style lang='scss' src='../style.scss' scoped/>"]}]}