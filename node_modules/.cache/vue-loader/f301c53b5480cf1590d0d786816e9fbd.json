{"remainingRequest":"/home/hieule/Desktop/DoAn/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hieule/Desktop/DoAn/src/components/FoodList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hieule/Desktop/DoAn/src/components/FoodList.vue","mtime":1646209621176},{"path":"/home/hieule/Desktop/DoAn/node_modules/cache-loader/dist/cjs.js","mtime":1626151276645},{"path":"/home/hieule/Desktop/DoAn/node_modules/babel-loader/lib/index.js","mtime":1626151276101},{"path":"/home/hieule/Desktop/DoAn/node_modules/cache-loader/dist/cjs.js","mtime":1626151276645},{"path":"/home/hieule/Desktop/DoAn/node_modules/vue-loader/lib/index.js","mtime":1626151279033}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEhUVFAgfSBmcm9tICIuLi9BUEkvaHR0cF9jb21tb24iOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBlclBhZ2U6IDEyLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgbmFtZUZvb2Q6ICIiLAogICAgICBpbWdhZ2U6ICIiLAogICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgIHByaWNlOiAiIiwKICAgICAgaWRfZm9vZDogIiIsCiAgICAgIHNlYXJjaDogIiIsCiAgICAgIGNhdGU6ICIiLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0Zm9vZCIpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHJvd3MoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5mb29kLmZvb2RzLmxlbmd0aDsKICAgIH0sCiAgICBsaXN0cygpIHsKICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5mb29kLmZvb2RzOwogICAgICByZXR1cm4gaXRlbXMuc2xpY2UoCiAgICAgICAgKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGVyUGFnZSwKICAgICAgICB0aGlzLmN1cnJlbnRQYWdlICogdGhpcy5wZXJQYWdlCiAgICAgICk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIGN1cnJlbnRQYWdlOiB7CiAgICAvLyAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgIC8vICAgaGFuZGxlcihkYXRhKSB7CiAgICAvLyAgICAgaWYgKGRhdGEgIT09IDEpIHsKICAgIC8vICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRmb29kIik7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRmb29kIik7CiAgICAvLyAgICAgfQogICAgLy8gICB9LAogICAgLy8gfSwKICAgIHNlYXJjaDogewogICAgICBoYW5kbGVyKGRhdGEpIHsKICAgICAgICBpZiAoZGF0YSAhPT0gIiIpIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzZWFyY2hmb29kIiwgZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRmb29kIik7CiAgICAgICAgfQogICAgICB9LAogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHNob3dNb2RhbChpZF9mb29kKSB7CiAgICAgIGF3YWl0IEhUVFAuZ2V0KGAvc2FucGhhbS8ke2lkX2Zvb2R9YCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5uYW1lRm9vZCA9IHJlcy5kYXRhLnRlbnNwOwogICAgICAgIHRoaXMuaW1hZ2UgPSByZXMuZGF0YS5waG90bzsKICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gcmVzLmRhdGEubW90YV9uZ2FuOwogICAgICAgIHRoaXMucHJpY2UgPSByZXMuZGF0YS5kb25naWE7CiAgICAgICAgdGhpcy5pZF9mb29kID0gaWRfZm9vZDsKICAgICAgICB0aGlzLmNhdGUgPSByZXMuZGF0YS5kYW5obXVjLm1hZG07CiAgICAgIH0pOwogICAgICB0aGlzLiRyZWZzWyJtb2RhbC0xIl0uc2hvdygpOwogICAgfSwKICAgIGFzeW5jIGFkZFRvQ2FyZChmb29kKSB7CiAgICAgIGF3YWl0IEhUVFAucG9zdCgKICAgICAgICBgL2dpb2hhbmcvJHt0aGlzLiRzdG9yZS5zdGF0ZS51c2Vycy51c2Vycy5tYWtofS8ke2Zvb2R9P3NvbHVvbmc9MWAKICAgICAgKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0TnVtUXVhbiIsIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJzLnVzZXJzLm1ha2gpOwogICAgICB9KTsKICAgIH0sCiAgICBmb3JtYXRDYXNoKHZhbHVlKSB7CiAgICAgIGxldCB2YWwgPSAodmFsdWUgLyAxKS50b0ZpeGVkKDApLnJlcGxhY2UoIi4iLCAiLCIpOwogICAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCkucmVwbGFjZSgvXEIoPz0oXGR7M30pKyg/IVxkKSkvZywgIiwiKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["FoodList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FoodList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <b-container fluid>\n    <b-row>\n      <b-col lg=\"6\" class=\"my-1 ml-5\">\n        <b-form-group\n          label-cols-sm=\"3\"\n          label-align-sm=\"right\"\n          label-size=\"sm\"\n          class=\"mb-0\"\n        >\n          <b-input-group size=\"sm\">\n            <input\n              v-model=\"search\"\n              style=\"height: 31px\"\n              type=\"search\"\n              placeholder=\"Tìm món\"\n            />\n\n            <b-input-group-append>\n              <b-button size=\"sm\" @click=\"search = ''\">Clear</b-button>\n            </b-input-group-append>\n          </b-input-group>\n        </b-form-group>\n      </b-col>\n    </b-row>\n    <div class=\"d-flex justify-content-center flex-wrap\">\n      <div v-for=\"item in lists\" :key=\"item\" class=\"mt-3 ml-2\">\n        <div class=\"food\" @click=\"showModal(item.masp)\">\n          <div class=\"d-flex justify-content-center\" style=\"height: 40px\">\n            <h6>{{ item.tensp }}</h6>\n          </div>\n          <div class=\"d-flex justify-content-center\">\n            <img class=\"img_list\" :src=\"item.photo\" alt=\"\" />\n          </div>\n\n          <div class=\"d-flex justify-content-center align-items-center mt-2\">\n            <p class=\"mr-2 mt-2\">{{ formatCash(item.dongia.toString()) }}</p>\n            <b-button\n              variant=\"success\"\n              size=\"sm\"\n              class=\"mb-2\"\n              @click.stop=\"addToCard(item.masp)\"\n              >Mua ngay</b-button\n            >\n          </div>\n        </div>\n      </div>\n      <b-modal ref=\"modal-1\" hide-footer hide-header-close hide-header>\n        <div>\n          <h4>{{ nameFood }}</h4>\n          <div class=\"d-flex justify-content-center\">\n            <img :src=\"image\" class=\"img_detail\" />\n          </div>\n          <p>{{ description }}</p>\n          <div class=\"d-flex justify-content-between\">\n            <b-button\n              variant=\"success\"\n              size=\"sm\"\n              class=\"mb-2\"\n              @click=\"addToCard(id_food)\"\n              >Mua ngay</b-button\n            >\n            <h5>{{ formatCash(price.toString()) }}đ</h5>\n          </div>\n        </div>\n      </b-modal>\n    </div>\n    <div class=\"d-flex justify-content-center\">\n      <b-pagination\n        class=\"mt-4\"\n        v-model=\"currentPage\"\n        :total-rows=\"rows\"\n        :per-page=\"perPage\"\n      ></b-pagination>\n    </div>\n  </b-container>\n</template>\n<script>\nimport { HTTP } from \"../API/http_common\";\nexport default {\n  data() {\n    return {\n      perPage: 12,\n      currentPage: 1,\n      nameFood: \"\",\n      imgage: \"\",\n      description: \"\",\n      price: \"\",\n      id_food: \"\",\n      search: \"\",\n      cate: \"\",\n    };\n  },\n  created() {\n    this.$store.dispatch(\"getfood\");\n  },\n  computed: {\n    rows() {\n      return this.$store.state.food.foods.length;\n    },\n    lists() {\n      const items = this.$store.state.food.foods;\n      return items.slice(\n        (this.currentPage - 1) * this.perPage,\n        this.currentPage * this.perPage\n      );\n    },\n  },\n  watch: {\n    // currentPage: {\n    //   immediate: true,\n    //   handler(data) {\n    //     if (data !== 1) {\n    //       this.$store.dispatch(\"getfood\");\n    //     } else {\n    //       this.$store.dispatch(\"getfood\");\n    //     }\n    //   },\n    // },\n    search: {\n      handler(data) {\n        if (data !== \"\") {\n          this.$store.dispatch(\"searchfood\", data);\n        } else {\n          this.$store.dispatch(\"getfood\");\n        }\n      },\n    },\n  },\n  methods: {\n    async showModal(id_food) {\n      await HTTP.get(`/sanpham/${id_food}`).then((res) => {\n        this.nameFood = res.data.tensp;\n        this.image = res.data.photo;\n        this.description = res.data.mota_ngan;\n        this.price = res.data.dongia;\n        this.id_food = id_food;\n        this.cate = res.data.danhmuc.madm;\n      });\n      this.$refs[\"modal-1\"].show();\n    },\n    async addToCard(food) {\n      await HTTP.post(\n        `/giohang/${this.$store.state.users.users.makh}/${food}?soluong=1`\n      ).then(() => {\n        this.$store.dispatch(\"getNumQuan\", this.$store.state.users.users.makh);\n      });\n    },\n    formatCash(value) {\n      let val = (value / 1).toFixed(0).replace(\".\", \",\");\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    },\n  },\n};\n</script>\n<style lang='scss' src='../style.scss' scoped/>"]}]}